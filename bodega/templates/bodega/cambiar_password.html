{% extends 'bodega/base.html' %}
{% block title %}Cambiar Contraseña - Bodega Eirete{% endblock %}
{% block content %}
<div class="container mt-4">
  {% if validlink %}
    <h2 class="mb-3">Cambiar Contraseña</h2>
    <form method="post" novalidate>
      {% csrf_token %}
      {{ form.non_field_errors }}
      <div class="mb-3">
        <label for="{{ form.new_password1.id_for_label }}" class="form-label">Nueva contraseña</label>
        {{ form.new_password1 }}
        {% for error in form.new_password1.errors %}
          <div class="text-danger">{{ error }}</div>
        {% endfor %}
      </div>
      <div class="mb-3">
        <label for="{{ form.new_password2.id_for_label }}" class="form-label">Confirmar nueva contraseña</label>
        {{ form.new_password2 }}
        {% for error in form.new_password2.errors %}
          <div class="text-danger">{{ error }}</div>
        {% endfor %}
      </div>
      <button type="submit" class="btn btn-custom">Guardar contraseña</button>
    </form>
    {% else %}
    <div class="alert alert-danger">
      <h5>El enlace para cambiar la contraseña ha expirado o es inválido.</h5>
      <p>Solicita un nuevo enlace o comunícate con el administrador.</p>
      <p>
        <a href="{% url 'login' %}" class="btn btn-secondary mt-2">Volver al inicio de sesión</a>
      </p>
    </div>
  {% endif %}  
</div>
{% endblock %}








{% comment %} {% extends 'bodega/base.html' %}
{% block title %}Cambiar Contraseña - Bodega Eirete{% endblock %}
{% block content %}
<div class="container mt-4">
  <h2>Cambiar Contraseña</h2>
  <p>Ingresa tu nueva contraseña y confírmala:</p>
  {% if validlink %}
    <form method="post">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit" class="btn btn-custom">Cambiar Contraseña</button>
    </form>
  {% else %}
    <p class="text-danger">El enlace para cambiar la contraseña ha expirado o es inválido.</p>
  {% endif %}
  <pre>{{ view.get_context_data|pprint }}</pre>
</div>
{% endblock %} {% endcomment %}
